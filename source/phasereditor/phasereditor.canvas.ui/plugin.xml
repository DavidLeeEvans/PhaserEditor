<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.editors">
      <editor
            class="phasereditor.canvas.ui.editors.CanvasEditor"
            default="false"
            extensions="canvas"
            icon="platform:/plugin/phasereditor.ui/icons/canvas.png"
            id="phasereditor.canvas.ui.editors.canvas"
            name="Canvas">
      </editor>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <wizard
            category="phasereditor.ui.wizardCategory"
            class="phasereditor.canvas.ui.wizards.NewWizard_State"
            hasPages="true"
            icon="platform:/plugin/phasereditor.ui/icons/canvas.png"
            id="phasereditor.canvas.ui.newStateWizard"
            name="State File">
      </wizard>
      <wizard
            category="phasereditor.ui.wizardCategory"
            class="phasereditor.canvas.ui.wizards.NewWizard_Group"
            hasPages="true"
            icon="platform:/plugin/phasereditor.ui/icons/canvas.png"
            id="phasereditor.canvas.ui.newGroupWizard"
            name="Group File">
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:phasereditor.canvas.ui.editors.canvas?after=object">
        
	         <menu
                icon="platform:/plugin/phasereditor.ui/icons/shape_move_front.png"
                label="Rise And Lower">
	               
	                <command
	               commandId="phasereditor.canvas.ui.riseToTop"
	               icon="platform:/plugin/phasereditor.ui/icons/shape_move_front.png"
	               label="Rise To Top"
	               style="push">
	         </command>
	         <command
	               commandId="phasereditor.canvas.ui.rise"
	               icon="platform:/plugin/phasereditor.ui/icons/shape_move_forwards.png"
	               label="Rise"
	               style="push">
	         </command>
	         <command
	               commandId="phasereditor.canvas.ui.lower"
	               icon="platform:/plugin/phasereditor.ui/icons/shape_move_backwards.png"
	               label="Lower"
	               style="push">
	         </command>
	         <command
	               commandId="phasereditor.canvas.ui.lowerBottom"
	               icon="platform:/plugin/phasereditor.ui/icons/shape_move_back.png"
	               label="Lower To Bottom"
	               style="push">
	         </command>
	         
         </menu>
         <menu
               icon="platform:/plugin/phasereditor.ui/icons/shape_align_center.png"
               label="Align">
            
            
            
            <command
                  commandId="phasereditor.canvas.ui.align.left"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_left.png"
                  label="Align Left"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.right"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_right.png"
                  label="Align Right"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.top"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_top.png"
                  label="Align Top"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.bottom"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_bottom.png"
                  label="Align Bottom"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.center"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_center.png"
                  label="Align Center"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.middle"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_middle.png"
                  label="Align Middle"
                  style="push">
            </command>
            
            
            
         </menu>
         <separator
               name="phasereditor.canvas.ui.separator1"
               visible="true">
         </separator>
         <menu
               label="Group">
            <command
                  commandId="phasereditor.canvas.ui.makegroup"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_group.png"
                  label="Group Selection"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.moveToGroup"
                  label="Move To Group..."
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.emptygroup"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_square_group.png"
                  label="Create Empty Group"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.ungroup"
                  label="Break Group"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.trimGroup"
                  label="Trim Group"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.closeGroup"
                  label="Close Group"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.openGroup"
                  label="Open Group"
                  style="push">
            </command>
         </menu>
         <menu
               label="Pick">
            <command
                  commandId="phasereditor.canvas.ui.pick"
                  label="Allow Pick Object"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.nopick"
                  label="Deny Pick Object"
                  style="push">
            </command>
         </menu>
         <command
               commandId="phasereditor.canvas.ui.togglesnapping"
               style="push">
         </command>
         <command
               commandId="phasereditor.canvas.ui.setSnappingWithSelection"
               style="push">
         </command>
         <separator
               name="phasereditor.canvas.ui.separator4"
               visible="true">
         </separator>
         <command
               commandId="phasereditor.canvas.ui.addsprite"
               icon="platform:/plugin/phasereditor.ui/icons/car_add.png"
               label="Add Sprite..."
               style="push">
         </command>
         <command
               commandId="phasereditor.canvas.ui.resizeTile"
               label="Resize Tile Sprite"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="phasereditor.canvas.ui.oneSpriteSelected">
               </reference>
            </visibleWhen>
         </command>
         <menu
               label="Morph To">
            <command
                  commandId="phasereditor.canvas.ui.morphToTilesprite"
                  label="Tile Sprite"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.morphToButton"
                  label="Button"
                  style="push">
            </command>
         </menu>
         <separator
               name="phasereditor.canvas.ui.separator3"
               visible="true">
         </separator>
         <menu
               label="Arcade">
            <command
                  commandId="phasereditor.canvas.ui.arcadeRectBody"
                  label="Set Arcade Body - Rectangular"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.arcadeCircleBody"
                  label="Set Arcade Body - Circular"
                  style="push">
            </command>
         </menu>
         <command
               commandId="phasereditor.canvas.ui.editbody"
               label="Edit Body"
               style="push">
         </command>
         <command
               commandId="phasereditor.canvas.ui.disablePhysics"
               label="Remove Body"
               style="push">
         </command>
         <separator
               name="phasereditor.canvas.ui.separator6"
               visible="true">
         </separator>
         <menu
               label="Transform">
            <command
                  commandId="phasereditor.canvas.ui.scale"
                  label="Scale"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.editangle"
                  label="Rotate"
                  style="push">
            </command>
            <command
                  commandId="phasereditor.canvas.ui.editanchors"
                  label="Anchor"
                  style="push">
            </command>
         </menu>
         <separator
               name="phasereditor.canvas.ui.separator5"
               visible="true">
         </separator>
         <command
               commandId="org.eclipse.ui.edit.delete"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=org.eclipse.ui.workbench.navigate">
         <toolbar
               id="phasereditor.canvas.ui.toolbar"
               label="Canvas">
            <command
                  commandId="phasereditor.canvas.ui.zoomRestore"
                  icon="platform:/plugin/phasereditor.ui/icons/zoom_default.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <separator
                  name="phasereditor.canvas.ui.separator1"
                  visible="true">
            </separator>
            <command
                  commandId="phasereditor.canvas.ui.riseToTop"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_move_front.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_move_front.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.rise"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_move_forwards.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_move_forwards.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.lower"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_move_backwards.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_move_backwards.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.lowerBottom"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_move_back.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_move_back.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <separator
                  name="phasereditor.canvas.ui.separator2"
                  visible="true">
            </separator>
            <command
                  commandId="phasereditor.canvas.ui.align.left"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_align_left.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_left.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.right"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_align_right.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_right.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.top"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_align_top.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_top.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.bottom"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_align_bottom.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_bottom.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.center"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_align_center.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_center.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.align.middle"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_align_middle.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_align_middle.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <separator
                  name="phasereditor.canvas.ui.separator3"
                  visible="true">
            </separator>
            <command
                  commandId="phasereditor.canvas.ui.quickEdit"
                  disabledIcon="platform:/plugin/phasereditor.ui/icons/d/shape_square_edit.png"
                  icon="platform:/plugin/phasereditor.ui/icons/shape_square_edit.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.addsprite"
                  icon="platform:/plugin/phasereditor.ui/icons/car_add.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <separator
                  name="phasereditor.canvas.ui.separator4"
                  visible="true">
            </separator>
            <command
                  commandId="phasereditor.canvas.ui.quickOutline"
                  icon="platform:/plugin/phasereditor.ui/icons/outline_co.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.toggleSidePanel"
                  icon="platform:/plugin/phasereditor.ui/icons/application_side_tree.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.togglePalette"
                  icon="platform:/plugin/phasereditor.ui/icons/palette.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <separator
                  name="phasereditor.canvas.ui.separator5"
                  visible="true">
            </separator>
            <command
                  commandId="phasereditor.canvas.ui.gencode"
                  icon="platform:/plugin/phasereditor.ui/icons/cog.png"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <command
                  commandId="phasereditor.canvas.ui.showcode"
                  icon="platform:/plugin/phasereditor.ui/icons/jcu_obj.gif"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <reference
                        definitionId="phasereditor.canvas.ui.activeEditor">
                  </reference>
               </visibleWhen>
            </command>
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="phasereditor.canvas.ui.activeEditor">
               </reference>
            </visibleWhen>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="phasereditor.canvas.ui.editor.category"
            name="Canvas">
      </category>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Rise one level the selected node."
            id="phasereditor.canvas.ui.rise"
            name="Canvas: Rise">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Lower one level the selected node."
            id="phasereditor.canvas.ui.lower"
            name="Canvas: Lower">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Lower to bottom the selected node."
            id="phasereditor.canvas.ui.lowerBottom"
            name="Canvas: Lower To Bottom">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Rise to top the selected node."
            id="phasereditor.canvas.ui.riseToTop"
            name="Canvas: Rise To Top">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Make a group with the selected nodes."
            id="phasereditor.canvas.ui.makegroup"
            name="Canvas: Make Group">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Make empty group."
            id="phasereditor.canvas.ui.emptygroup"
            name="Canvas: Make Empty Group">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.escape"
            name="Canvas: Escape">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Align to left the selected nodes."
            id="phasereditor.canvas.ui.align.left"
            name="Canvas: Align Left">
      </command>
     <command
           categoryId="phasereditor.canvas.ui.editor.category"
           description="Align to top the selected nodes."
           id="phasereditor.canvas.ui.align.top"
           name="Canvas: Align Top">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Align to right the selected nodes."
            id="phasereditor.canvas.ui.align.right"
            name="Canvas: Align Right">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Align to bottom the selected nodes."
            id="phasereditor.canvas.ui.align.bottom"
            name="Canvas: Align Bottom">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Align to bottom the selected nodes."
            id="phasereditor.canvas.ui.align.center"
            name="Canvas: Align Center">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Align to middle the selected nodes."
            id="phasereditor.canvas.ui.align.middle"
            name="Canvas: Align Middle">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Remove the white space from the left and top of the groups."
            id="phasereditor.canvas.ui.trimGroup"
            name="Canvas: Trim Group">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Break up a group."
            id="phasereditor.canvas.ui.ungroup"
            name="Canvas: Break Group">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Open a group for selection."
            id="phasereditor.canvas.ui.openGroup"
            name="Canvas: Open Group">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Close a group for selection."
            id="phasereditor.canvas.ui.closeGroup"
            name="Canvas: Close Group">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Allow a node to be picked by the mouse."
            id="phasereditor.canvas.ui.pick"
            name="Canvas: Allow Pick">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            description="Deny a node to be picked by the mouse."
            id="phasereditor.canvas.ui.nopick"
            name="Canvas: Allow Pick">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.morphToTilesprite"
            name="Morph To Tile Sprite">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.morphToButton"
            name="Morph To Button">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            defaultHandler="phasereditor.canvas.ui.handlers.ZoomRestoreHandler"
            id="phasereditor.canvas.ui.zoomRestore"
            name="Restore Zoom">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.quickOutline"
            name="Quick outline">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.quickEdit"
            name="Quick object edit">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.addsprite"
            name="Add Sprite">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.resizeTile"
            name="Resize Tile Sprite">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.moveToGroup"
            name="Move To Other Group">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.arcadeCircleBody"
            name="Arcade Circle Body">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.arcadeRectBody"
            name="Arcade Rect Body">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.disablePhysics"
            name="Remove Physical Body">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.editbody"
            name="Edit Physical Body">
      </command>
      <command
            id="phasereditor.canvas.ui.scale"
            name="Edit Scale">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            id="phasereditor.canvas.ui.editangle"
            name="Edit Rotation">
      </command>
      <command
            id="phasereditor.canvas.ui.togglesnapping"
            name="Toggle Snapping">
      </command>
      <command
            id="phasereditor.canvas.ui.setSnappingWithSelection"
            name="Enable Snapping (Selection Size)">
      </command>
      <command
            id="phasereditor.canvas.ui.editanchors"
            name="Edit Anchors">
      </command>
      <command
            categoryId="phasereditor.canvas.ui.editor.category"
            defaultHandler="phasereditor.canvas.ui.handlers.ShowCodeHandler"
            id="phasereditor.canvas.ui.showcode"
            name="Show Code">
      </command>
      <command
            defaultHandler="phasereditor.canvas.ui.handlers.ToggleSidePanelHandler"
            id="phasereditor.canvas.ui.toggleSidePanel"
            name="Toggle Side Panel">
      </command>
      <command
            defaultHandler="phasereditor.canvas.ui.handlers.TogglePaletteHandler"
            id="phasereditor.canvas.ui.togglePalette"
            name="Toggle Palette">
      </command>
      <command
            defaultHandler="phasereditor.canvas.ui.handlers.GenerateCodeHandler"
            id="phasereditor.canvas.ui.gencode"
            name="Generate Code">
      </command>
      
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="phasereditor.canvas.ui.handlers.DeleteHandler"
            commandId="org.eclipse.ui.edit.delete">
         <enabledWhen>
         	<or>
         	
         		<with
                   variable="activeContexts">
                <iterate
                      ifEmpty="false"
                      operator="or">
                       <equals
                            value="phasereditor.canvas.ui.palettecontext">
                      </equals>
                </iterate>
             </with>
                     
                      
            <and>
            	<reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            	</reference>
             <with
                   variable="activeContexts">
                <iterate
                      ifEmpty="false"
                      operator="or">
                      <equals
                            value="phasereditor.canvas.ui.nodescontext">
                      </equals>
                </iterate>
             </with>
            </and>
            </or>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.RiseShapeHandler"
            commandId="phasereditor.canvas.ui.rise">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.LowerShapeHandler"
            commandId="phasereditor.canvas.ui.lower">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.RiseTopShapeHandler"
            commandId="phasereditor.canvas.ui.riseToTop">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.LowerBottomShapeHandler"
            commandId="phasereditor.canvas.ui.lowerBottom">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.MakeGroupHandler"
            commandId="phasereditor.canvas.ui.makegroup">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.MakeEmptyGroupHandler"
            commandId="phasereditor.canvas.ui.emptygroup">
         <activeWhen>
            <or>
            	<and>
               		<reference
                     		definitionId="phasereditor.canvas.ui.nodesSelected">
               		</reference>
               		<with
                     	variable="selection">
                  		<count
                        	value="1">
                  		</count>
               		</with>
            	</and>
            	<with
                	variable="selection">
              		<count
                       	value="!">
           			</count>
               	</with>
             </or>  		
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.AbortOperationHandler"
            commandId="phasereditor.canvas.ui.escape">
         <activeWhen>
            <with
                  variable="activePartId">
               <equals
                     value="phasereditor.canvas.ui.editors.canvas">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.AlignNodeHandler"
            commandId="phasereditor.canvas.ui.align.left">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.AlignNodeHandler"
            commandId="phasereditor.canvas.ui.align.top">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.AlignNodeHandler"
            commandId="phasereditor.canvas.ui.align.right">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.AlignNodeHandler"
            commandId="phasereditor.canvas.ui.align.bottom">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.AlignNodeHandler"
            commandId="phasereditor.canvas.ui.align.center">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.AlignNodeHandler"
            commandId="phasereditor.canvas.ui.align.middle">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.TrimGroupHandler"
            commandId="phasereditor.canvas.ui.trimGroup">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.groupsSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.BreakGroupHandler"
            commandId="phasereditor.canvas.ui.ungroup">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.groupsSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.CloseOpenGroupHandler"
            commandId="phasereditor.canvas.ui.openGroup">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.groupsSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.CloseOpenGroupHandler"
            commandId="phasereditor.canvas.ui.closeGroup">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.groupsSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.PickHandler"
            commandId="phasereditor.canvas.ui.pick">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.PickHandler"
            commandId="phasereditor.canvas.ui.nopick">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.MorphToTileSpriteHandler"
            commandId="phasereditor.canvas.ui.morphToTilesprite">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <or>
                     <instanceof
                           value="phasereditor.canvas.ui.shapes.ImageSpriteNode">
                     </instanceof>
                     <instanceof
                           value="phasereditor.canvas.ui.shapes.AtlasSpriteNode">
                     </instanceof>
                     <instanceof
                           value="phasereditor.canvas.ui.shapes.SpritesheetSpriteNode">
                     </instanceof>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.MorphToButtonSpriteHandler"
            commandId="phasereditor.canvas.ui.morphToButton">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false"
                     operator="and">
                  <or>
                     <instanceof
                           value="phasereditor.canvas.ui.shapes.ImageSpriteNode">
                     </instanceof>
                     <instanceof
                           value="phasereditor.canvas.ui.shapes.AtlasSpriteNode">
                     </instanceof>
                     <instanceof
                           value="phasereditor.canvas.ui.shapes.SpritesheetSpriteNode">
                     </instanceof>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.CopyHandler"
            commandId="org.eclipse.ui.edit.copy">
         <activeWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </activeWhen>
      </handler>
      
      <handler
            class="phasereditor.canvas.ui.handlers.CutHandler"
            commandId="org.eclipse.ui.edit.cut">
         <activeWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </activeWhen>
      </handler>
      
      
      <handler
            class="phasereditor.canvas.ui.handlers.PasteHandler"
            commandId="org.eclipse.ui.edit.paste">
         <activeWhen>
            <with
                  variable="activeContexts">
               <iterate
                     ifEmpty="false"
                     operator="or">
                  <equals
                        value="phasereditor.canvas.ui.nodescontext">
                  </equals>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      
      <handler
            class="phasereditor.canvas.ui.handlers.QuickOutlineHandler"
            commandId="phasereditor.canvas.ui.quickOutline">
         <activeWhen>
            <with
                  variable="activePartId">
               <equals
                     value="phasereditor.canvas.ui.editors.canvas">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.QuickObjectEditHandler"
            commandId="phasereditor.canvas.ui.quickEdit">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.AddSpriteHandler"
            commandId="phasereditor.canvas.ui.addsprite">
         <activeWhen>
            <with
                  variable="activePartId">
               <equals
                     value="phasereditor.canvas.ui.editors.canvas">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.ResizeTileHandler"
            commandId="phasereditor.canvas.ui.resizeTile">
         <enabledWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.oneSpriteSelected">
            </reference></enabledWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.MoveToOtherGroupHandler"
            commandId="phasereditor.canvas.ui.moveToGroup">
         <activeWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.nodesSelected">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.SetArcadeBodyHandler"
            commandId="phasereditor.canvas.ui.arcadeCircleBody">
         <activeWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.spritesSelected">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.SetArcadeBodyHandler"
            commandId="phasereditor.canvas.ui.arcadeRectBody">
         <activeWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.spritesSelected">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.DisablePhysicsHandler"
            commandId="phasereditor.canvas.ui.disablePhysics">
         <activeWhen>
            <with
                  variable="selection">
               <iterate>
                  <adapt
                        type="phasereditor.canvas.core.BodyModel">
                  </adapt>
               </iterate>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.EditBodyHandler"
            commandId="phasereditor.canvas.ui.editbody">
         <activeWhen>
            <with
                  variable="selection">
               <and>
                  <count
                        value="1">
                  </count>
                  <iterate>
                     <adapt
                           type="phasereditor.canvas.core.BodyModel">
                     </adapt>
                  </iterate>
               </and>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.ScaleHandler"
            commandId="phasereditor.canvas.ui.scale">
         <activeWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.oneObjectSelected">
            </reference></activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.EditAngleHandler"
            commandId="phasereditor.canvas.ui.editangle">
         <activeWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.oneObjectSelected">
            </reference>
         </activeWhen>
      </handler>
      <handler
            class="phasereditor.canvas.ui.handlers.ToggleSnappingHandler"
            commandId="phasereditor.canvas.ui.togglesnapping">
      </handler>
      
      <handler
            class="phasereditor.canvas.ui.handlers.SetSnappingSelectionHandler"
            commandId="phasereditor.canvas.ui.setSnappingWithSelection">
         <activeWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.spritesSelected">
            </reference>
         </activeWhen>
      </handler>
      
      <handler
            class="phasereditor.canvas.ui.handlers.EditAnchorHandler"
            commandId="phasereditor.canvas.ui.editanchors">
         <activeWhen>
            <reference
                  definitionId="phasereditor.canvas.ui.oneSpriteSelected">
            </reference>
         </activeWhen>
      </handler>
      
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="phasereditor.canvas.ui.rise"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence ="HOME">
            </key>
      <key
            commandId="phasereditor.canvas.ui.riseToTop"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="PAGE_UP">
      </key>
      <key
            commandId="phasereditor.canvas.ui.lower"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="END">
      </key>
      <key
            commandId="phasereditor.canvas.ui.lowerBottom"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="PAGE_DOWN">
      </key>
      <key
            commandId="phasereditor.canvas.ui.escape"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="ESC">
      </key>
      <key
            commandId="phasereditor.canvas.ui.openGroup"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+C">
      </key>
      <key
            commandId="phasereditor.canvas.ui.closeGroup"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="C">
      </key>
      <key
            commandId="phasereditor.canvas.ui.trimGroup"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="T">
      </key>
      <key
            commandId="phasereditor.canvas.ui.ungroup"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+G">
      </key>
      <key
            commandId="phasereditor.canvas.ui.makegroup"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="G">
      </key>
      <key
            commandId="phasereditor.canvas.ui.pick"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="P">
      </key>
      <key
            commandId="phasereditor.canvas.ui.nopick"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+P">
      </key>
      <key
            commandId="phasereditor.canvas.ui.quickOutline"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+O">
      </key>
      <key
            commandId="phasereditor.canvas.ui.quickEdit"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="Q">
      </key>
      <key
            commandId="phasereditor.canvas.ui.addsprite"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+A">
      </key>
      <key
            commandId="phasereditor.canvas.ui.resizeTile"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="L">
      </key>
      <key
            commandId="phasereditor.canvas.ui.editbody"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="B">
      </key>
      <key
            commandId="phasereditor.canvas.ui.scale"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="S">
      </key>
       <key
            commandId="phasereditor.canvas.ui.editangle"
            contextId="phasereditor.canvas.ui.nodescontext"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="N">
      </key>
       <key
             commandId="phasereditor.canvas.ui.togglesnapping"
             contextId="phasereditor.canvas.ui.nodescontext"
             schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
             sequence="E">
       </key>
       <key
             commandId="phasereditor.canvas.ui.setSnappingWithSelection"
             contextId="phasereditor.canvas.ui.nodescontext"
             schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
             sequence="W">
       </key>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="phasereditor.canvas.ui.nodesSelected">
         <with
               variable="selection">
            <iterate
                  ifEmpty="false">
               <instanceof
                     value="phasereditor.canvas.ui.shapes.IObjectNode">
               </instanceof>
            </iterate>
         </with>
      </definition>
      <definition
            id="phasereditor.canvas.ui.groupsSelected">
         <with
               variable="selection">
            <iterate
                  ifEmpty="false">
               <instanceof
                     value="phasereditor.canvas.ui.shapes.GroupNode">
               </instanceof>
            </iterate>
         </with>
      </definition>
      <definition
            id="phasereditor.canvas.ui.tileSelected">
         <with
               variable="selection">
            <iterate
                  ifEmpty="false">
               <instanceof
                     value="phasereditor.canvas.ui.shapes.TileSpriteNode">
               </instanceof>
            </iterate>
         </with>
      </definition>
      <definition
            id="phasereditor.canvas.ui.oneSpriteSelected">
         <with
               variable="selection">
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false">
                  <instanceof
                        value="phasereditor.canvas.ui.shapes.ISpriteNode">
                  </instanceof>
               </iterate>
            </and>
         </with>
      </definition>
      <definition
            id="phasereditor.canvas.ui.spritesSelected">
         <with
               variable="selection">
            <iterate
                  ifEmpty="false">
               <instanceof
                     value="phasereditor.canvas.ui.shapes.ISpriteNode">
               </instanceof>
            </iterate>
         </with>
      </definition>
      <definition
            id="phasereditor.canvas.ui.spritesSelected">
         <with
               variable="selection">
            <iterate
                  ifEmpty="false">
               <instanceof
                     value="phasereditor.canvas.ui.shapes.IObjectNode">
               </instanceof>
            </iterate>
         </with>
      </definition>
      <definition
            id="phasereditor.canvas.ui.oneObjectSelected">
         <with
               variable="selection">
            <and>
               <count
                     value="1">
               </count>
               <iterate
                     ifEmpty="false">
                  <instanceof
                        value="phasereditor.canvas.ui.shapes.IObjectNode">
                  </instanceof>
               </iterate>
            </and>
         </with>
      </definition>
      <definition
            id="phasereditor.canvas.ui.activeEditor">
         <with
               variable="activeEditorId">
            <equals
                  value="phasereditor.canvas.ui.editors.canvas">
            </equals>
         </with>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="phasereditor.canvas.ui.nodescontext"
            name="In scene and outline"
            parentId="org.eclipse.ui.contexts.window">
      </context>
      <context
            id="phasereditor.canvas.ui.scenecontext"
            name="In scene">
      </context>
      <context
            id="phasereditor.canvas.ui.palettecontext"
            name="In palette"
            parentId="org.eclipse.ui.contexts.window">
      </context>
      <context
            id="phasereditor.canvas.ui.any"
            name="In editor"
            parentId="org.eclipse.ui.contexts.window">
      </context>
   </extension>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="*">
         <newWizardShortcut
               id="phasereditor.canvas.ui.newGroupWizard">
         </newWizardShortcut>
         <newWizardShortcut
               id="phasereditor.canvas.ui.newStateWizard">
         </newWizardShortcut>
      </perspectiveExtension>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.viewer">
      <viewerContentBinding
            viewerId="org.eclipse.ui.navigator.resources.ProjectExplorer">
         <includes>
            <contentExtension
                  pattern="phasereditor.assetpack.ui.*">
            </contentExtension>
         </includes>
      </viewerContentBinding>
   </extension>
   <extension
         point="org.eclipse.ui.navigator.navigatorContent">
      <commonWizard
            menuGroupId="phaser.new.other"
            type="new"
            wizardId="phasereditor.canvas.ui.newStateWizard">
      <enablement></enablement>
      </commonWizard>
      <commonWizard
            menuGroupId="phaser.new.other"
            type="new"
            wizardId="phasereditor.canvas.ui.newGroupWizard">
         <enablement></enablement>
      </commonWizard>
   </extension>
   <extension
         point="phasereditor.assetpack.core.assetConsumers">
      <consumer
            handler="phasereditor.canvas.ui.CanvasAssetConsumer"
            id="phasereditor.canvas.ui.consumer1">
      </consumer>
   </extension>
   <extension
         point="phasereditor.project.core.buildParticipant">
      <participant
            handler="phasereditor.canvas.ui.CanvasEditorBuildParticipant"
            id="phasereditor.canvas.ui.participant2"
            order="4">
      </participant>
   </extension>

</plugin>
