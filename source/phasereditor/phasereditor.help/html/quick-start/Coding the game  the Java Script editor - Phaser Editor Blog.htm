<html>

<head>

</head>

<body>

     
                <h2 class="title" itemprop="headline">Coding the game: the Java Script editor</h2>
                <div class="desc text-left" itemprop="articleBody">
                    <p>With Phaser you write the game with JavaScript as main language (there is also some support for TypeScript). In Phaser Editor the JavaScript programming is a first citizen, the JavaScript editor is the more important component for us, and we do an extra effort to build the best experience for the Phaser developer.</p>

<p><a href="https://www.youtube.com/watch?v=H8D441SAf3M&amp;index=3&amp;list=PLB8gI_5U0MvCJuhPv-LBdi_a9PQxYxFqK">Watch a demo video</a></p>

<p>The JavaScript editor is part of the JSDT (Eclipse Web Tools) and we extended and modified it to adjust it to the Phaser API and style.</p>

<p>When you create a Phaser Project the main JS file is opened in the editor. To open the JS editor manually you can navigate to the JS file in the Project Explorer and double click on it.</p>

<h2>Phaser API smart code completion</h2>

<p>The JS editor has a <em>"a complex inference engine"</em> to bind JS elements with static type information. We think it works very well with the Phaser API. We made a Phaser API library to make it easier to the inference engine to compute the static type of the JS expressions.</p>

<p>If you follow certain coding structure you will enjoy a smart completion of the Phaser methods, properties and classes. JavaScript is a dynamic language and there are cases where compute the type of an expression is hard or impossible. However, in Phaser Editor you can annotate with static type information different statements like var declarations, method returns, method parameters and prototypes. See the next section.</p>

<p>Member proposals:</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022012810-APISmartCompletions.png" alt="API smart completions"></p>

<p>Arguments proposals:</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022012913-APISmartCompletionsParams.png" alt="Arguments proposals"></p>

<p>Drawbacks:</p>

<p>Note in the proposals you see types like Phaser_Game or Phaser_Sprite, etc.. It happens because JSDT does not understand the concept of namespaces, so we had to tweak the editor to simulate namespaces. This means that you can autocomplete Phaser.Sprite but also Phaser_Sprite, but the last one is not valid in Phaser. We are working on replace the JSDT inference engine for a more accurate tool like <a href="https://github.com/angelozerr/tern.java">Tern</a>.</p>

<h2>Declare the var's type</h2>

<p>Annotate var declarations is the general way to set the static type to a variable:</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022013150-TypeDecl_Var.png" alt="Var type declaration"></p>

<p>This is something that you would like to use in a callback function:</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022013448-TypeDecl_Context.png" alt="Var type declaration (context)"></p>

<h2>Declare the method arguments and returns types</h2>

<p>In a method you can declare the type of the return and the parameters:</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022013651-TypeDecl_Method.png" alt="Method arguments and return types declaration"></p>

<p>Unfortunately, for now, the type annotations are not supported in anonymous functions.</p>

<h2>Prototype type annotation</h2>

<p>In Phaser you are not forced to use custom prototypes (type inheritance), however, a recommended practice is to split your game in functional components like game states, custom sprites and groups.</p>

<p>In JavaScript you can define a prototype like this:</p>

<pre>function NewClass() {
    BaseClass.call(this);
};
NewClass.prototype = Object.create(BaseClass.prototype);
NewClass.prototype.constructor = NewClass;
NewClass.myNewMethod = function () {
    // ...
};
</pre>

<p>In Phaser Editor if you annotate the prototype with the <code>BaseClass</code> then in the context of the prototype functions you will get the smart completions of the<code>BaseClass</code> too. Just take a look to the files generated by the <code>New &gt; (State | Sprite | Group) Source File</code> :</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022014124-TypeDecl_Prototype.png" alt="Prototype inheritance declaration"></p>

<p>Note that we annotate an intermediate proto var with the <code>Phaser.Group</code> type, then we assign this var to the new prototype declaration.</p>

<pre>/** @type Phaser.Group */
var proto = Object.create(Phaser.Group.prototype);
MyGroup.prototype = proto;
MyGroup.prototype.constructor = MyGroup;
</pre>

<p>This is not the more beautiful thing of the world, we prefer to use something like a @extends JSDoc tag, but for now it is not possible. We recommend to use the Source wizards, they generated a code can be "understood" by the JS editor.</p>

<h2>Phaser API hover help</h2>

<p>The hover help is about to get the documentation of a Phaser API element just with a mouse hover. It works pretty similar to the smart completions, the type inference engine should be able to compute the static type of the hover element, so you have to follow the same coding style (annotating the declarations with JSDoc tags) explained in the previous section.</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022014507-HoverAPI.png" alt="Hover API members"></p>

<h2>Code templates</h2>

<p>With the code templates you can get snippets of code to cover specific Phaser tasks. These templates are the same are used in the official Phaser <a href="http://phaser.io/sandbox">online editor</a>.</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022014954-EditorTemplates.png" alt="enter image description here"></p>

<h2>Asset keys proposals</h2>

<p>When you define your assets in an asset pack file then the JS editor read the asset keys and show them in the proposals popup. These proposals are listed when the content assist popup is invoked in a string context:</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022015227-AssetProposals.png" alt="Asset proposals"></p>

<p>As you can see in the above screenshot, the asset keys are shown in the information control of the content assist popup. In the case of audio files it plays the sound.</p>

<h2>File names proposals</h2>

<p>Also file names are shown in the content assist popup and they are visualized in the information control. In the next image are listed all the file names that match the <code>png</code> string:</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022015532-FileNameProposals.png" alt="File names proposals"></p>

<h2>Easing names proposals</h2>

<p>Tweens are part of any Phaser game. When you create a tween you should provide the easing to be used in the animation. A common way to identify the easing is giving the easing function:</p>

<pre>game.add.tween(item).to({y: 240}, 2400, Phaser.Easing.Bounce.Out);
</pre>

<p>But also you can write the easing name:</p>

<pre>game.add.tween(item).to({y: 240}, 2400, "Bounce.easeOut");
</pre>

<p>In Phaser Editor you get easing names completions:</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20160621160546-EasingLiteralAssist.gif" alt="Easing completions"></p>

<h2>Errors, warnings and quick fix</h2>

<p>By default Phaser Editor checks for syntax and semantic problems (errors and warnings). These problems are shown in the Problems view. In the JS editor the expression with problems is underlined with a yellow or red color in dependence of if it is a warning or an error.</p>

<p>Many of these problems can be fixed automatically with the Quick Fix command. When you get a problem, put the cursor on the error and press <code>CTRL+1</code>, the Quick Fix dialog is shown with different options.</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022021923-QuickFix.png" alt="Quick fix"></p>

<p>You can change the validator settings to ignore a kind of problem or treat it as a warning or error. These settings can be changed in a specific project (right click on the project and select Properties) or for the whole workspace (in the main menu <code>Windows &gt; Preferences</code>).</p>

<p><img src="./Coding the game  the Java Script editor - Phaser Editor Blog_files/20151022022005-EnableJSValidation.png" alt="Validator preferences"></p>

<h2>Preview</h2>

<p>The JavaScript editor supports some preview features. When you hover a file name string, then it shows a popup with a preview of that file. In a similar way, if you hover the name of an <a href="http://phasereditor.boniatillo.com/blog/quick-start/020-asset-pack">asset entry in the asset pack</a>, then it shows a popup with a preview of the identified asset.</p>

<p>To quick preview an object you can hover its name but also you can put the cursor in the middle of the name and type <code>CTRL+ALT+V</code>, that command opens the identified object in the <a href="http://phasereditor.boniatillo.com/blog/quick-start/040-preview-window">Preview window</a>.</p>
                </div><!--//desc-->
            
			
</body>
</html> 