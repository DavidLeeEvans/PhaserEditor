<html>

<head>

</head>

<body>
                

                <h2 class="title" itemprop="headline"><a href="http://phasereditor.boniatillo.com/blog/quick-start/080-canvas">Scene Editor</a></h2>
                <div class="desc text-left" itemprop="articleBody">
                    <p>Canvas is a visual (WYSWYG) game level/object editor  for Phaser. With this tool you can create a scene, add sprites to it and edit the sprite's properties. The scenes are compiled to Phaser JavaScript code,  to a "class" that extends the <code>Phaser.Group</code> prototype, so it is added to the game in the same way you add any other custom group:</p>

<pre><code class="javascript">function create() {
 var scene = new MyScene(game);
 ...
}
</code></pre>

<p><a href="https://youtu.be/4pA-NJf_gEE">Watch the video</a></p>

<p><strong>This feature is in its PREVIEW stage, but yet it is pretty usable and useful for many cases</strong></p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622074750-canvas-life-of-cuco.png" alt="Canvas"></p>

<p>Many of the art used in this document is part of the game <a href="http://file///C:/Users/arian/Documents/Source/PhaserEditor/Public/source/phasereditor/phasereditor.help/html/quick-start/globalgamejam.org/2016/games/life-cuco">The Life of Cuco</a>.</p>

<h2>Index</h2>

<ul>
<li><a href="#RunDemo">Run the demo</a></li>
<li><a href="#CreateScene">Create a scene</a></li>
<li><a href="#AddObjects">Add objects to scene</a></li>
<li><a href="#Outline">Outline window</a></li>
<li><a href="#EditProperties">Edit the objects properties</a></li>
<li><a href="#Arcade">Arcade physics support</a></li>
<li><a href="#EditorProperties">Editor-specific, non Phaser properties</a></li>
<li><a href="#CreateGroup">Create a group</a></li>
<li><a href="#CreateDiffTypes">Create different types of objects</a>

<ul>
<li><a href="#CreateSprite">Sprite</a></li>
<li><a href="#CreateTile">Tile Sprite</a></li>
<li><a href="#CreateButton">Button</a></li>
</ul></li>
<li><a href="#AdvancedProperties">Advanced property editors</a>

<ul>
<li><a href="#TintEditor">Tint property editor</a></li>
<li><a href="#FrameEditor">Frame editor</a></li>
<li><a href="#AnimationsEditor">Animations editor</a></li>
<li><a href="#DataEditor">Data editor</a></li>
</ul></li>
<li><a href="#AlignAndOrder">Objects aligment and depth order</a>

<ul>
<li><a href="#Align">Aligment</a></li>
<li><a href="#Order">Depth order</a></li>
</ul></li>
<li><a href="#EditOperations">Common editing operations</a></li>
<li><a href="#RemoveDistractions">Removing distractions. The Palette</a>

<ul>
<li><a href="#Palette">Palette</a></li>
</ul></li>
<li><a href="#Settings">Canvas settings</a></li>
<li><a href="#GenCode">Include the generated code in your game</a>

<ul>
<li><a href="#PublicObj">Access the objects of the scene</a></li>
<li><a href="#ExtendingCode">Extending the generated code</a></li>
</ul></li>
</ul>

<h2><a name="RunDemo"></a>Run the demo</h2>

<p>There is a project template with a Canvas scene. Actually, all the code and pictures in this tutorial are part of that template, so we recommend you start looking into it.</p>

<p>Just create a project based on the <code>Main Template &gt; Platformer (using level designer)</code>.</p>

<h2><a name="CreateScene"></a>Create a scene</h2>

<p>To create a new scene go to <code>File &gt; New &gt; Canvas</code>. It opens the New Canvas wizard, select the containing folder and the name of the file. Choose a JavaScript prototype valid name, because that name will be used in the generated code. If your scene name is <code>Scene1.canvas</code> then it generates a <code>Scene1.js</code> file with a <code>Scene1</code> class in it.</p>

<p>The Canvas file can be created in any folder under the <code>WebContent</code>, because later you need to include the generated file <code>Scene1.js</code> in your game by adding it to the <code>index.html</code> file or to the <a href="http://phasereditor.boniatillo.com/blog/quick-start/020-asset-pack">asset pack file</a>.</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622085629-NewCanvasFile.png" alt="New canvas file"></p>

<p>One time the canvas file is created it is opened in the scene editor.</p>

<h2><a name="AddObjects"></a>Add objects to scene</h2>

<p>The objects of the scene are created from the assets defined in the asset pack files of your project.</p>

<p>This file is included in some project templates (check the Main Templates section of the New Phaser Project wirzad) but also can be added manually at any moment by the user.</p>

<p>We recommend you to read the <a href="http://phasereditor.boniatillo.com/blog/quick-start/020-asset-pack">Asset Manager</a> tutorial to get familiar with the asset pack file.</p>

<p>Let's go step by step:</p>

<ol>
<li>Create (if you don't have yet) an <a href="http://phasereditor.boniatillo.com/blog/quick-start/020-asset-pack">asset pack file</a> in your project.</li>
<li>Add some assets to the pack file.</li>
<li>If the <a href="http://phasereditor.boniatillo.com/blog/quick-start/020-asset-pack#AssetsView">Assets</a> window is not open (it is by default) then open it (press <code>Ctrl+3</code> and type <code>assets</code>, the select "View - Assets").</li>
<li>Open the Canvas file in the scene editor (this is opened when the file is created, or just double click on the <code>Scene1.canvas</code> file of the Project Explorer).</li>
<li>Drag an asset (eg. an image or atlas frame) from the Assets view into the scene area.</li>
</ol>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622103251-DropAssetFromAssetsView.png" alt="Drop asset from Assets view"></p>

<p>By the way, you can drag assets also from the <a href="http://phasereditor.boniatillo.com/blog/quick-start/040-preview-window">Preview</a> window and drop them into the scene, it cause the same effect than if you drag it from the Assets view. If you have open a texture atlas or a spritesheet in the Preview window, then you can select a frame and drop it into the Canvas.</p>

<p>The objects created by dropping an asset in the scene are simple sprites. In the next sections we explain how to add specialized sprites like buttons and tiles.</p>

<h2><a name="Outline"></a>Outline window</h2>

<p>In the top/left corner of the editor there is the Outline window. It shows the objects of the scene in a tree viewer, so there you can filter, select, delete, group and move the objects of the scene. This is very useful when the scene is huge or you can move objects from one group to other.</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622112535-Outline.png" alt="The Outline shows the scene objects tree"></p>

<p>In addition there is the Quick Outline window. It is opened by the user with a key sequence (<code>Ctrl+O</code>). The object selected by the user is focused in the scene, so it can be used as a search tool too.</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160823150134-QuickOutline.png" alt="Quick outline window"></p>

<h3><a name="EditProperties"></a>Edit the objects properties</h3>

<p>The list of properties of the scene objects are a subset of the properties provided by the Phaser API. We just try to reproduce how traditionally developers add objects to the world but with a visual and assited apporach.</p>

<ol>
<li>Select the object in the scene (or in the Outline).</li>
<li>The objects properties are shown in the Property Grid small window at the left/bottom of the editor.</li>
<li>Click on the value of a property and change it. Then press ENTER to apply that change. In case of numeric properties, you can write a math expression like <code>15*30</code>, then it is evaluated and the result is set as value.</li>
</ol>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622110152-EditSpriteProperty.png" alt="Edit sprite property"></p>

<p>As you can note, in the top of the grid there is a textbox with "type filter text", it helps to filter the list of properties and find the one of your interest.</p>

<p>A nice feature is that you can hover the mouse over a property and it displays the help of that property. This help is the same of the Phaser API, actually, that help is taken from the Phaser metadata generated by Phaser Editor, by parsing the Phaser sources.</p>

<p>As alternative to the Property Grid, you can open the Quick Edit dialog (by pressing <code>Q</code> or clicking in the button of the toolbar). It is actually the same thing of the Property Grid but is whown in a popup dialog.</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622111151-PropertyHelp.png" alt="Property help"></p>

<p>When you change a property it is highlighted with a bold font, and generated in the code in this way:</p>

<pre><code class="javascript">var sprite = this.add.sprite(10, 20, "wall");
sprite.tint = 0xfcfcfc; // modified property
</code></pre>

<p>There are some properties that can be edited with visual tools, like Arcade physics body size, tile sprite size, object scale, pivot, and anchors.</p>

<p>To edit the transformations of an object, select it and open the context menu, it shows the <code>Transform</code> menu, inside there are the options <code>Scale</code>, <code>Rotate</code> and <code>Anchor</code>.</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160824152852-Rotate.png" alt="Object transformations"></p>

<h2><a name="Arcade"></a>Arcade physics support</h2>

<p>To enable Arcade physics on a sprite you have two options:
1. Set <code>true</code> the <code>physicsGroup</code> property of the parent group. Physics bodies are automatically enabled in objects added to a physics group.
2. Select the object and open the context menu, in the <code>Arcade</code> menu there are two commands: <code>Set Arcade Body - Rectangular</code> and <code>- Circular</code>, both commands enable a physic body (rectangular or circular) in the selected object. Note that when you add a body to a sprite, in the properties editor is shown and can be edited many properties related to the Arcade physics.</p>

<p>If a sprite has a physics body, then the body size can be visually edited by executing the <code>Edit Body</code> command of the contxt menu.</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160824150120-SetArcadeBody.png" alt="Edit physics properties"></p>

<h2><a name="EditorProperties"></a>Editor-specific, non Phaser properties</h2>

<p>There are special properties that are not directly related to any Phaser API, else these are values provided to improve the Editor usability or to customize some aspects of the generated code. These properties are under the "Editor" section of the Property Grid:</p>

<ul>
<li><strong>name</strong>: Used as var name in the generated code and label in the Outline window.</li>
<li><strong>public</strong>: To make public an object in the generated code. By default the objects are not accesible to the outside.</li>
<li><strong>pick</strong>: To control when an object can be selected in the scene. Useful when you considere an object is done so you set it not pickable to be sure you are not going to mess it. By default is false.</li>
<li><strong>generate</strong>: Set to false if you need to keep the object in the scene but exclude it from the generated code. By default is true.</li>
<li><strong>show</strong>: Set to false if you want to hide the object in the scene, but it still visible in the game runtime. Useful when you want to temporarily hide distracting elements from the scene, like background objects.</li>
<li><strong>closed</strong>: It only applies to groups. If set to true, the group and children are going to perform like one single object, in operations like selection and dragging. It means, if you pick a child, the group is selected. Yet you can select the children in the Outline window.</li>
</ul>

<h2><a name="CreateGroup"></a>Create a group</h2>

<p>You can create groups of objects by selecting them and pressing the <code>G</code> key, or through the <code>Group Selection</code> option of the scene context menu.</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622125705-GroupSelection.png" alt="Group selection"></p>

<p>In Canvas a group is the same as a group in Phaser (it generates a <code>Phaser.Group</code>) and share a subset of properties and functionalities.</p>

<p>In Phaser a group has different roles, like object pooling, transformation unity, layer, proxy to apply changes to a set of sprites, etc... In Canvas we focus mainly on the display role of the group, so you can translate, scale, rotate, bring to forward, etc, a list of objects by joining them in a group.</p>

<p>Here a list of properties and functions related to groups:</p>

<ul>
<li>To group a selection of objects press <code>G</code> or select Group Selection in the context menu.</li>
<li>To create an empty group select the Create Empty Group option in the context menu.</li>
<li>To move objects from one group to other, drag/drop them in the Outline window .</li>
<li>To break a group select it and press <code>Shift+G</code> or select Break Group in the context menu.</li>
<li>To trim a group select it and press <code>T</code> or select the Trim Group option in the context menu. Trim a group means remove the blank space at the left/top of the group. It changes the local group and children positions but keep the same global position. Use it when you like to use a group as a transformation unity and not as a layer or object pool.</li>
<li>To close a group select it and press <code>C</code> or select <code>Close Group</code> in the context menu. As we explained before, you may close a group when you want to manipulate the group and the children as a single object. This is not a Phaser concept, else a feature to be used only in design time. To open the group press <code>Shift+T</code>.</li>
<li>A group contains the Display properties: position, scale, rotation and pivot.</li>
<li>To create a physics group, first create it and then set to true the <code>physicsGroup</code> property. A physics group is a regular group but it will automatically set a physics body to all its children.  In addition you can select the <code>physicsBodyType</code> and the <code>physicsSortDirection</code>.</li>
</ul>

<p>A group is generated in the following way:</p>

<pre><code class="javascript">var group1 = this.add.group(parent);
</code></pre>

<p>If it is a physics group then it is generated as:</p>

<pre><code class="javascript">var group1 = this.add.physicsGroup(parent);
</code></pre>

<h2><a name="CreateDiffTypes"></a>Create different types of objects</h2>

<p>Canvas supports these type of objects:</p>

<ul>
<li>Group</li>
<li>Sprite</li>
<li>Tile Sprite</li>
<li>Button</li>
</ul>

<p>Groups was covered in the previous section so here we will focus on the rest of the types.</p>

<p>The simple way to add different type of sprites is by opening the Add Sprite dialog. To open this dialog you can press <code>Ctrl+Shift+A</code> or click in the toolbar button. As you can see in the picture, you will be able to select the asset  (from the list) and the type of the sprite (from the buttons):</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160824110145-AddSpriteDialog.png" alt="Add Sprite dialog"></p>

<h3><a name="CreateSprite"></a>Sprite</h3>

<p>A sprite is the common object, when you drop an asset into the scene a new sprite is created. The code generated for a sprite is the following:</p>

<pre><code class="javascript">var zombi = this.add.sprite(100, 100, "atlas1", "zombi");
</code></pre>

<p>A sprite can be created from an image, a texture atlas frame or a spritesheet frame.</p>

<p>The properties of a sprite are:</p>

<ul>
<li><strong>Editor properties</strong>: explained in a previous section.</li>
<li><strong>Display properties</strong>: it includes position, scale, rotation, and pivot.</li>
<li><strong>Sprite properties</strong>: anchor, tint, animations and frameName or (frame in case it is based on a spritesheet).</li>
</ul>

<h3><a name="CreateTile"></a>Tile Sprite</h3>

<p>A tile sprite in Canvas is the same of a <code>Phaser.TileSprite</code>. It is a sprite but adds other "tiling" properties and functions.</p>

<p>To create a tile sprite:</p>

<ol>
<li>Create a sprite by droping an asset into the scene.</li>
<li>Select the sprite, open the context menu (right click) and in the submenu Morph To select the Tile Sprite option.</li>
</ol>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622144054-MorphToTileSprite.png" alt="Morph to Tile Sprite"></p>

<p>The properties added by the tile sprite are grouped in the Tile Sprite section of the Property Grid:</p>

<ul>
<li><strong>tilePosition</strong>: the offset position of the image.</li>
<li><strong>width</strong> and <strong>height</strong>: the dimensions of the sprite, usually it matches with the width or height of the game bounds. </li>
<li><strong>tileScale</strong>: the scale of the image.</li>
</ul>

<p>The code generated for a tile sprite is like:</p>

<pre><code class="javascript">var background = this.add.tileSprite(0, 0, 1800, 1800, "atlas1", "wall", parentGroup);
</code></pre>

<h3><a name="CreateButton"></a>Button</h3>

<p>A button, like in <code>Phaser.Button</code> is a sprite with button related properties and functions, like callbacks and state frames.</p>

<p>To create a button is just like the tile sprite, you morph a sprite into a button:</p>

<ol>
<li>Create a sprite by droping an asset into the scene.</li>
<li>Select the sprite, open the context menu (right click) and in the submenu Morph To select the Button option.</li>
</ol>

<p>A button in Canvas supports the next properties, grouped into a Button section of the Property Grid:</p>

<ul>
<li><strong>callback</strong> and <strong>callbackContext</strong>: just like in a Phaser button. Note the text you write in these properties are generated verbatim, so take care of it. An example of callback could be <code>this.playButtonPressed</code> and for the callback context <code>this</code>. Note that <code>this</code> refers to the scene, wich is a custom group.</li>
<li><strong>overFrame</strong>, <strong>outFrame</strong>, <strong>downFrame</strong> and <strong>upFrame</strong>: like in Phaser, you set there the name or the index of the frame. To select a frame it opens a Frame Selector dialog. In a next section we talk more about it. In the scene the button always shows the selected <strong>outFrame</strong>. Maybe in a future we can add a "simulate" mode so you can preview how the button performs in run-time.</li>
</ul>

<p>The code generated for a button is like this:</p>

<pre><code class="javascript">var play = this.game.add.button(200, 0, 'play_btn', this.play, this, 1, 0, 2, 3, this);
</code></pre>

<h2><a name="AdvancedProperties"></a>Advanced property editors</h2>

<p>The majority of the property editors are common text-field based widgets, but there are some properties with a more advanced editors, to assist the user to select well known values.</p>

<h3><a name="TintEditor"></a>Tint property editor</h3>

<p>The <code>tint</code> property is present in all the sprite based objects: sprite, tile sprite and button. To edit the value of the tint the editor shows a dialog where the user can select a color. This color dialog is the one provided by the underlaying OS, so the one shown in Windows may differ for the one shown in Linux.</p>

<p>To unset the tint, select the white color.</p>

<h3><a name="FrameEditor"></a>Frame Editor</h3>

<p>The Frame Editor opens a dialog that shows to the user all the frames of a spritesheet or texture atlas. This editor is used in properties like <code>frameName</code>, <code>frame</code>, <code>overFrame</code>, <code>outFrame</code> etc...</p>

<p>In case that the frame could be set to null, the dialog shows a Set Null button.</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622152841-FrameSelector.png" alt="Frame selector"></p>

<h3><a name="AnimationsEditor"></a>Animations editor</h3>

<p>Sprites have the <code>animations</code> properties,  represented in Phaser by the <code>Phaser.AnimationManager</code>. In Canvas, the <code>animations</code> property is generated like this:</p>

<pre><code class="javascript">var dino = this.add.sprite(0, 0, 'dino');
dino.animations.add('walk', [0, 1, 2], 4, true);
</code></pre>

<p>We provide an Animations editor where you create animations and set the name, fps, kill-on-complete, loop and frames:</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622160306-AnimationsDialog.png" alt="Animations editor"></p>

<p>In addition you can mark an animation as "public". For each public animation the editor generates a public field with a references to it. For example, if the <strong>player</strong> sprite has a public <strong>walk</strong> animation, the editor generates a <code>fPlayer_walk</code> field that can be used like this: <code>scene1.fPlayer_walk.play()</code>.</p>

<h3><a name="DataEditor"></a>Data editor</h3>

<p>The <code>data</code> property of the sprites can be used to set custom attributes to the object. To edit that property it opens a dialog where you can write a JSON literal with arbitrary values. In the JSON values you can use the special var <code>$$</code>, it will be replaced by the name of the sprite. It is very useful to set relative values.</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160825152525-DataPropEditor.png" alt="Data property editor"></p>

<h2><a name="AlignAndOrder"></a>Objects aligment and depth order</h2>

<p>Position commands are always a powerful resource to build the layout of scenes. In Canvas we support some basic commands for alignment (left, right, top, bottom, center and middle) and for depth order (rise, rise to top, lower and lower to bottom).</p>

<h3><a name="Align"></a>Aligment</h3>

<p>The alignment commands are avilable in the conext menu and the Canvas toolbar:</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622162725-AlignCommands.png" alt="Align commands"></p>

<p>The aligment commands are related to the parent group of the target object. If the sprite "head" belongs to the group "dino", and we select the "left" aligment, then the local X position of "dino" will be set to <code>0</code>, it means, that it will be at the left border of the group. Note that objects with no parent group set explicity belong to the global scene group.</p>

<h3><a name="Order"></a>Depth order</h3>

<p>Pretty similar to aligment commands there are the order commands. To apply them first you select the target objects and click on the corresponfing toolbar button or context menu option.</p>

<p>The "order" commands send an object back and forward, in the display list of its group.</p>

<p><em>NOTE: In Phaser there are some aligment constants and methods, but they are more (we think) about to align an object in runtime. It is a great resource for those who set the game layout "by hand". We are exploring this new features and in future versions of Canvas we can take advantage of it or reuse some concepts, like align in a grid.</em></p>

<h2><a name="EditOperations"></a>Common editing operations</h2>

<p>Canvas support common editing operations like:</p>

<ul>
<li>Cut, Copy and Paste of the objects.</li>
<li>Undo, Redo of all major operations on nodes.</li>
<li>Zoom in/out/restore. Scroll the wheel of the mouse to zoom in/out, and the Zoom 1:1 button in the toolbar.</li>
<li>Pan the scene, by hodling the middle mouse button and dragging in any direction.</li>
<li>Object selection, by clicking it or dragging the mouse and create a selection box.</li>
<li>Object moving, first you select the objects and then you drag them.</li>
</ul>

<h2><a name="RemoveDistractions"></a>Removing distractions. The Palette</h2>

<p>For sure, to design your scene, you will want to get all the space of the screen and put down all un-usefulls windows around.</p>

<p>The default layout in Phaser Editor is a bit charged, it opens the Project Explorer, Chains view, Problems view, Preview view and Assets view, in addition to the editor area.</p>

<p>However, Eclipse (the platform behind Phaser Editor) has a very customizable and flexible layout. You can minimize windows and open them with a quick look, or dock the windows (really they are called "views") in the screen corners or stack them. We encourage you to read the Workbench User Guide bundled in Phaser Editor.</p>

<p>There are two shortcuts to remove all windows around your canvas editor:</p>

<ol>
<li>Dettach the editor and show it as a single and independent window. To do this, drag the editor tab and drop it outside the main window. To restore it just drop it again into the main window. This is a better method when you have multiple monitors so you can open the Canvas editor in a display and the other editors and views in the other display.</li>
<li>Double click in the Canvas editor tab, it maximize the editor part and minimize all the views around. So you will get all the space for Canvas while you can at the same time take a fast look to the other views (like Assets and Preview) by pressing their icons.</li>
</ol>

<p>That's fine, but yet inside the editor you have the Porperty Grid and the Outline windows. You can hide/show them with the "side panel" button of the Canvas toolbar (next to the alignment buttons).</p>

<h3><a name="Palette"></a>Palette</h3>

<p>"Ok, I removed all distractions around the scene window, but how can I add the sprites".</p>

<p>If your Assets window is minimized, you can click on its icon, it opens the Assets in a fast mode, so you can drag the assets and drop them into the scene.</p>

<p>But there is other option. You can open the Palette. In the toolbar there is an icon to open it, next to the "side panel" button.</p>

<p>The Palette is a thin panel docked at the right of the scene. You can drop assets in that panel so they will be there available to be dropped later into the scene, so you don't need to keep open the Assets view:</p>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160622171143-RemoveDistractions.png" alt="Remove distractions"></p>

<h2><a name="Settings"></a>Canvas settings</h2>

<p>To open the general Canvas settings dialog click on the wrench icon in the toolbar.</p>

<p>The dialog shows few settings:</p>

<ul>
<li><p><strong>Scene width and height</strong>. These values has not impact on the generated code, it is used only for show the "world frame" in the editor. The generated code is just a custom group so the developer is should to set the game size and world bounds in the game code.</p></li>
<li><p><strong>Scene color</strong>. It sets the canvas "world" background color. This value is not included in the generated code.</p></li>
<li><p><strong>Snapping</strong>. You can enable snapping and set the X and Y steps of the snapping. This is very useful to create levels with fixed size sprites, because the snapping guarantee that objects are placed in the right positions. The snapping can be toggle with a key sequence: <code>E</code>. With the <code>W</code> key you can enable the snapping and set the width and height of the selected object.</p></li>
<li><p><strong>Generate on Save</strong>. If set to true, the code is generated when the user saves the scene.</p></li>
</ul>

<p><img src="./Scene Editor - Phaser Editor Blog_files/20160623101622-SettingsDialog.png" alt="Settings dialog"></p>

<h2><a name="GenCode"></a>Include the generated code in your game</h2>

<p>A Canvas scene is compiled into a readable JavaScript file, with the same name of the scene file but with the <code>js</code> extension. If your scene is named <code>Scene1.canvas</code> then it generates <code>Scene1.js</code>.</p>

<p>This is an example of the code of a scene with a single "door" sprite:</p>

<pre><code class="javascript">// Generated by Phaser Editor v1.2.0

/**
 * Scene1.
 * @param {Phaser.Game} aGame The game.
 * @param {Phaser.Group} aParent The parent group.
 */
function Scene1(aGame, aParent) {
    Phaser.Group.call(this, aGame, aParent);

    /* --- pre-init-begin --- */

    // you can insert code here

    /* --- pre-init-end --- */

    var door = this.game.add.sprite(1005, 753, 'atlas1', 'Puerta', this);
    door.anchor.setTo(0.5, 0.0);


    /* --- post-init-begin --- */

    // you can insert code here

    /* --- post-init-end --- */
}

/** @type Phaser.Group */
var Scene1_proto = Object.create(Phaser.Group.prototype);
Scene1.prototype = Scene1_proto;
Scene1.prototype.constructor = Phaser.Group;

/* --- end generated code --- */

</code></pre>

<p>As you can see, it generates a <code>Scene1</code> prototype that extends the <code>Phaser.Group</code> prototype, and in the constructor it adds to "this" (the group) the objects of the scene.</p>

<p>Then you can include that code in your game like you add any other custom group in it:</p>

<pre><code class="javascript">function create() {
 var scene = new Scene1(game);
}
</code></pre>

<p>Note that with Canvas we do not pretend to deal with all the aspects of a game, the developer should write the code to create the game, the states, other objects of the world, etc... Canvas is just an object (group) visual editor.</p>

<p>As you do with any other JavaScript file of your game, you should load the <code>Scene1.js</code> by including it in the <code>index.html</code> file or by using any other javascript files loading. We prefer to load it as a <code>script</code> asset of the <a href="http://phasereditor.boniatillo.com/blog/quick-start/020-asset-pack">pack file</a>.</p>

<h3><a name="PublicObj"></a>Access the objects of the scene</h3>

<p>If you look inside the generated code, the variables used to reference the scene objects are declared local (<code>var door</code>), so you can't access, in the code of your game, to the scene objects.</p>

<p>To get access to the scene objects you should explicity set them "public". To do this select the object in the scene and set the "public" property to true, save the file, and the generated code is updated, with a new field <code>this.fDoor = door;</code>, in this way you can access to the door object via the <code>fDoor</code> field:</p>

<pre><code class="javascript">function create() {
 var scene = new Scene1(game);
 var door = scene.fDoor;
 // do something with the door
}
</code></pre>

<h3><a name="ExtendingCode"></a>Extending the generated code</h3>

<p>To extend the generated code you can use any JavaScript "extending" pattern like prototype "inheritance", or you can write directly inside the generated file, in certains regions of the file marked as protected.</p>

<p>If you look into the code, there are sections marked by comments like:</p>

<pre><code class="javascript">/* --- post-init-begin --- */

// you can insert code here

/* --- post-init-end --- */
</code></pre>

<p>Everything you write between the "tags" <code>/* --- post-init-begin --- */</code> and <code>/* --- post-init-end --- */</code> is preserved at code generation. This is very helpful to fill the gap between the Canvas supported fueatures and the Phaser API. For example, yet Canvas does not support Arcade physics, but you can layout the objects and later modify the generated code and add physics bodies and properties to the objects, by inserting that code in the protected code sections.</p>

<p>In addition you can add methods to the generated group, note there is a line to mark the end of the generated code:</p>

<pre><code class="javascript">/* --- end generated code --- */
</code></pre>

<p>Below that line you can write your code, it will be preserved from generation to generation. You can add an <code>update</code>, <code>render</code>, <code>preRender</code>, etc... methods to the prototype:</p>

<pre><code class="javascript">/* --- end generated code --- */

Secne1.prototype.render = function () {
 this.debug.body(this.fDoor);
};
</code></pre>

<p>In future versions we can add some customizable settings and TypeScript code generators. As many other elements of Phaser Editor, this scene editor can be used as a complement of the text editor of your choice, as you can see, the generated code is very easy to understand and can be included in any project.</p>
                </div><!--//desc-->
            				
				
</body>
</html>
